<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link href="data:text/css;charset=utf-8,html%7B%0Amax%2Dwidth%3A%20820px%3B%0Amargin%3A%200%20auto%3B%0Abackground%3A%20%23eee%3B%0Aposition%3A%20relative%3B%0A%7D%0Abody%20%7B%0Afont%2Dfamily%3A%20Helvetica%2C%20arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E6%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%2010px%3B%0Abackground%2Dcolor%3A%20white%3B%0Apadding%3A%2030px%3B%20%7D%0Abody%20%3E%20%2A%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%20%21important%3B%20%7D%0Abody%20%3E%20%2A%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%20%21important%3B%20%7D%0Aa%20%7B%0Acolor%3A%20%234183C4%3B%20%7D%0Aa%2Eabsent%20%7B%0Acolor%3A%20%23cc0000%3B%20%7D%0Aa%2Eanchor%20%7B%0Adisplay%3A%20block%3B%0Apadding%2Dleft%3A%2030px%3B%0Amargin%2Dleft%3A%20%2D30px%3B%0Acursor%3A%20pointer%3B%0Aposition%3A%20absolute%3B%0Atop%3A%200%3B%0Aleft%3A%200%3B%0Abottom%3A%200%3B%20%7D%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0Amargin%3A%2020px%200%2010px%3B%0Apadding%3A%200%3B%0Afont%2Dweight%3A%20bold%3B%0A%2Dwebkit%2Dfont%2Dsmoothing%3A%20antialiased%3B%0Acursor%3A%20text%3B%0Aposition%3A%20relative%3B%20%7D%0Ah1%3Ahover%20a%2Eanchor%2C%20h2%3Ahover%20a%2Eanchor%2C%20h3%3Ahover%20a%2Eanchor%2C%20h4%3Ahover%20a%2Eanchor%2C%20h5%3Ahover%20a%2Eanchor%2C%20h6%3Ahover%20a%2Eanchor%20%7B%0Abackground%3A%20url%28data%3Atext%2Fplain%3B%20charset%3Dutf%2D8%2C404%253A%2520Not%2520Found%29%20no%2Drepeat%2010px%20center%3B%0Atext%2Ddecoration%3A%20none%3B%20%7D%0Ah1%20tt%2C%20h1%20code%20%7B%0Afont%2Dsize%3A%20inherit%3B%20%7D%0Ah2%20tt%2C%20h2%20code%20%7B%0Afont%2Dsize%3A%20inherit%3B%20%7D%0Ah3%20tt%2C%20h3%20code%20%7B%0Afont%2Dsize%3A%20inherit%3B%20%7D%0Ah4%20tt%2C%20h4%20code%20%7B%0Afont%2Dsize%3A%20inherit%3B%20%7D%0Ah5%20tt%2C%20h5%20code%20%7B%0Afont%2Dsize%3A%20inherit%3B%20%7D%0Ah6%20tt%2C%20h6%20code%20%7B%0Afont%2Dsize%3A%20inherit%3B%20%7D%0Ah1%20%7B%0Afont%2Dsize%3A%2028px%3B%0Acolor%3A%20black%3B%20%7D%0Ah2%20%7B%0Afont%2Dsize%3A%2024px%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23cccccc%3B%0Acolor%3A%20black%3B%20%7D%0Ah3%20%7B%0Afont%2Dsize%3A%2018px%3B%20%7D%0Ah4%20%7B%0Afont%2Dsize%3A%2016px%3B%20%7D%0Ah5%20%7B%0Afont%2Dsize%3A%2014px%3B%20%7D%0Ah6%20%7B%0Acolor%3A%20%23777777%3B%0Afont%2Dsize%3A%2014px%3B%20%7D%0Ap%2C%20blockquote%2C%20ul%2C%20ol%2C%20dl%2C%20li%2C%20table%2C%20pre%20%7B%0Amargin%3A%2015px%200%3B%20%7D%0Ahr%20%7B%0Abackground%3A%20transparent%20url%28data%3Atext%2Fplain%3B%20charset%3Dutf%2D8%2C404%253A%2520Not%2520Found%29%20repeat%2Dx%200%200%3B%0Aborder%3A%200%20none%3B%0Acolor%3A%20%23cccccc%3B%0Aheight%3A%204px%3B%0Apadding%3A%200%3B%20%7D%0Abody%20%3E%20h2%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%0Apadding%2Dtop%3A%200%3B%20%7D%0Abody%20%3E%20h1%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%0Apadding%2Dtop%3A%200%3B%20%7D%0Abody%20%3E%20h1%3Afirst%2Dchild%20%2B%20h2%20%7B%0Amargin%2Dtop%3A%200%3B%0Apadding%2Dtop%3A%200%3B%20%7D%0Abody%20%3E%20h3%3Afirst%2Dchild%2C%20body%20%3E%20h4%3Afirst%2Dchild%2C%20body%20%3E%20h5%3Afirst%2Dchild%2C%20body%20%3E%20h6%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%0Apadding%2Dtop%3A%200%3B%20%7D%0Aa%3Afirst%2Dchild%20h1%2C%20a%3Afirst%2Dchild%20h2%2C%20a%3Afirst%2Dchild%20h3%2C%20a%3Afirst%2Dchild%20h4%2C%20a%3Afirst%2Dchild%20h5%2C%20a%3Afirst%2Dchild%20h6%20%7B%0Amargin%2Dtop%3A%200%3B%0Apadding%2Dtop%3A%200%3B%20%7D%0Ah1%20p%2C%20h2%20p%2C%20h3%20p%2C%20h4%20p%2C%20h5%20p%2C%20h6%20p%20%7B%0Amargin%2Dtop%3A%200%3B%20%7D%0Ali%20p%2Efirst%20%7B%0Adisplay%3A%20inline%2Dblock%3B%20%7D%0Aul%2C%20ol%20%7B%0Apadding%2Dleft%3A%2030px%3B%20%7D%0Aul%20%3Afirst%2Dchild%2C%20ol%20%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%20%7D%0Aul%20%3Alast%2Dchild%2C%20ol%20%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%20%7D%0Adl%20%7B%0Apadding%3A%200%3B%20%7D%0Adl%20dt%20%7B%0Afont%2Dsize%3A%2014px%3B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dstyle%3A%20italic%3B%0Apadding%3A%200%3B%0Amargin%3A%2015px%200%205px%3B%20%7D%0Adl%20dt%3Afirst%2Dchild%20%7B%0Apadding%3A%200%3B%20%7D%0Adl%20dt%20%3E%20%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%20%7D%0Adl%20dt%20%3E%20%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%20%7D%0Adl%20dd%20%7B%0Amargin%3A%200%200%2015px%3B%0Apadding%3A%200%2015px%3B%20%7D%0Adl%20dd%20%3E%20%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%20%7D%0Adl%20dd%20%3E%20%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%20%7D%0Ablockquote%20%7B%0Aborder%2Dleft%3A%204px%20solid%20%23dddddd%3B%0Apadding%3A%200%2015px%3B%0Acolor%3A%20%23777777%3B%20%7D%0Ablockquote%20%3E%20%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%20%7D%0Ablockquote%20%3E%20%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%20%7D%0Atable%20%7B%0Apadding%3A%200%3B%20%7D%0Atable%20tr%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23cccccc%3B%0Abackground%2Dcolor%3A%20white%3B%0Amargin%3A%200%3B%0Apadding%3A%200%3B%20%7D%0Atable%20tr%3Anth%2Dchild%282n%29%20%7B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%20%7D%0Atable%20tr%20th%20%7B%0Afont%2Dweight%3A%20bold%3B%0Aborder%3A%201px%20solid%20%23cccccc%3B%0Atext%2Dalign%3A%20left%3B%0Amargin%3A%200%3B%0Apadding%3A%206px%2013px%3B%20%7D%0Atable%20tr%20td%20%7B%0Aborder%3A%201px%20solid%20%23cccccc%3B%0Atext%2Dalign%3A%20left%3B%0Amargin%3A%200%3B%0Apadding%3A%206px%2013px%3B%20%7D%0Atable%20tr%20th%20%3Afirst%2Dchild%2C%20table%20tr%20td%20%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%20%7D%0Atable%20tr%20th%20%3Alast%2Dchild%2C%20table%20tr%20td%20%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%20%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%3B%20%7D%0Aspan%2Eframe%20%7B%0Adisplay%3A%20block%3B%0Aoverflow%3A%20hidden%3B%20%7D%0Aspan%2Eframe%20%3E%20span%20%7B%0Aborder%3A%201px%20solid%20%23dddddd%3B%0Adisplay%3A%20block%3B%0Afloat%3A%20left%3B%0Aoverflow%3A%20hidden%3B%0Amargin%3A%2013px%200%200%3B%0Apadding%3A%207px%3B%0Awidth%3A%20auto%3B%20%7D%0Aspan%2Eframe%20span%20img%20%7B%0Adisplay%3A%20block%3B%0Afloat%3A%20left%3B%20%7D%0Aspan%2Eframe%20span%20span%20%7B%0Aclear%3A%20both%3B%0Acolor%3A%20%23333333%3B%0Adisplay%3A%20block%3B%0Apadding%3A%205px%200%200%3B%20%7D%0Aspan%2Ealign%2Dcenter%20%7B%0Adisplay%3A%20block%3B%0Aoverflow%3A%20hidden%3B%0Aclear%3A%20both%3B%20%7D%0Aspan%2Ealign%2Dcenter%20%3E%20span%20%7B%0Adisplay%3A%20block%3B%0Aoverflow%3A%20hidden%3B%0Amargin%3A%2013px%20auto%200%3B%0Atext%2Dalign%3A%20center%3B%20%7D%0Aspan%2Ealign%2Dcenter%20span%20img%20%7B%0Amargin%3A%200%20auto%3B%0Atext%2Dalign%3A%20center%3B%20%7D%0Aspan%2Ealign%2Dright%20%7B%0Adisplay%3A%20block%3B%0Aoverflow%3A%20hidden%3B%0Aclear%3A%20both%3B%20%7D%0Aspan%2Ealign%2Dright%20%3E%20span%20%7B%0Adisplay%3A%20block%3B%0Aoverflow%3A%20hidden%3B%0Amargin%3A%2013px%200%200%3B%0Atext%2Dalign%3A%20right%3B%20%7D%0Aspan%2Ealign%2Dright%20span%20img%20%7B%0Amargin%3A%200%3B%0Atext%2Dalign%3A%20right%3B%20%7D%0Aspan%2Efloat%2Dleft%20%7B%0Adisplay%3A%20block%3B%0Amargin%2Dright%3A%2013px%3B%0Aoverflow%3A%20hidden%3B%0Afloat%3A%20left%3B%20%7D%0Aspan%2Efloat%2Dleft%20span%20%7B%0Amargin%3A%2013px%200%200%3B%20%7D%0Aspan%2Efloat%2Dright%20%7B%0Adisplay%3A%20block%3B%0Amargin%2Dleft%3A%2013px%3B%0Aoverflow%3A%20hidden%3B%0Afloat%3A%20right%3B%20%7D%0Aspan%2Efloat%2Dright%20%3E%20span%20%7B%0Adisplay%3A%20block%3B%0Aoverflow%3A%20hidden%3B%0Amargin%3A%2013px%20auto%200%3B%0Atext%2Dalign%3A%20right%3B%20%7D%0Acode%2C%20tt%20%7B%0Amargin%3A%200%202px%3B%0Apadding%3A%200%205px%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Aborder%3A%201px%20solid%20%23eaeaea%3B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0Aborder%2Dradius%3A%203px%3B%20%7D%0Apre%20code%20%7B%0Amargin%3A%200%3B%0Apadding%3A%200%3B%0Awhite%2Dspace%3A%20pre%3B%0Aborder%3A%20none%3B%0Abackground%3A%20transparent%3B%20%7D%0A%2Ehighlight%20pre%20%7B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0Aborder%3A%201px%20solid%20%23cccccc%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%2019px%3B%0Aoverflow%3A%20auto%3B%0Apadding%3A%206px%2010px%3B%0Aborder%2Dradius%3A%203px%3B%20%7D%0Apre%20%7B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0Aborder%3A%201px%20solid%20%23cccccc%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%2019px%3B%0Aoverflow%3A%20auto%3B%0Apadding%3A%206px%2010px%3B%0Aborder%2Dradius%3A%203px%3B%20%7D%0Apre%20code%2C%20pre%20tt%20%7B%0Abackground%2Dcolor%3A%20transparent%3B%0Aborder%3A%20none%3B%20%7D%0A%0A" rel="stylesheet">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="キーボード配列カスタマイズの話">キーボード配列カスタマイズの話</h1>
<p><a href="https://github.com/bx19tri/keybind" class="uri">https://github.com/bx19tri/keybind</a></p>
<p>1980 年台後半に Sony NEWS の Keyboard で vi を覚えた。</p>
<ul>
<li>記号はASCII配置</li>
<li>Esc は 1 の左、Tab の上</li>
<li>Control は A の左、Tab の下</li>
<li>BackQuote/Tilde は、Quote の右、CloseBracket の下</li>
</ul>
<p>が理想だった。 <a href="https://upload.wikimedia.org/wikipedia/commons/d/d7/KB_Japanese_AX_keyboard.svg">AX Keyboardも同じ配列</a> だったが現在では入手不能。<br />
Windwos であれば、109 Keyboardを <a href="https://appletllc.com/web/nodoka.htm">のどか</a> でリマップすれば完璧。(過去には mayu や猫まねきも利用)<br />
そのため、PC では 104 キーボードを選択したことはなかった。</p>
<p>MacBook 2015 購入時に US Keyboard 版を購入。</p>
<ul>
<li>のどかのようなソフトの調査が面倒</li>
<li>単純なキーの入れ替えでは、109 から 104 への再配置ができない</li>
<li>Control の位置変更は OS だけでできる</li>
<li>JP Keyboard には、1 の左にキーがない。リマップしても救えない</li>
</ul>
<p>が理由だった。<br />
が、BackQuote と Esc の再配置がキーが足りないために解決できずに 悩み続ける。(PC で 104 を避けてきた理由そのもの)</p>
<p>その後、remapped 109 on Windows で BackQuote の位置を妥協すれば、 各環境でほぼ同じにできることに気がついた。</p>
<p>BackQuote の解決とは非同期だが、Control は右小指より左右親指が より快適と思い変換・無変換を Control にリマップするようになった。<br />
最終的に SandS(Space and Shift) をヒントとして SandC(Space and Control) にした。</p>
<p>副次的に気付かされたが、英数で IME On と入力文字種選択ができるのは快適。 US キーボードでは Caps/英数 となりシフトキーでの修飾が 109 とは逆に なるが、のどかならば逆転可能。</p>
<p>(2019/04/03 追記)<br />
のどかで CTRL+J を Esc に変更してみた。 Google IME でも Esc が押されたと認識する。<br />
Esc キーを使わない事に慣れることができれば、 1 の左を BackQuote とする運用に変えることもできる。</p>
<p>(2019/04/23 追記)<br />
1 の左を BackQuote とすることを始めた。 無変換・変換・ひらがな の 3 キーへのリマップをやめた。<br />
将来、新しい用途へのリマップが可能な状態。<br />
emacs 風キーバインドで機能変更した CTRL-AF は候補となりうるが未実施。</p>
<p>(2019/04/24 追記)<br />
AXTCon109 というファイル名を SandC104on109 に変更した。 いろいろな変更を経て、AX 配列から乖離して 104 とほとんど同じになったのが理由。 追加でエンターをバックスペースに入れ替えれば、 変換が右Altより押しやすい以外は 104 でも同じ配列を実現できる状態となった。 104 しか選択肢がない状況でも悩む必要がなくなるはず。</p>
<h2 id="今後どんなキーボードを選ぶか">今後どんなキーボードを選ぶか？</h2>
<ul>
<li>Mac であれば、US Keyboard 一択。日本語配列は腐っていてリマップしても救えない。</li>
<li>PC では、右端の配列に不自然さがなければ 109。</li>
<li>右端が、104 がまともで 109 がいびつなノートPC の場合は 104 を選択。</li>
<li>使い分ける機材から 104 を排除できるのであれば、AX on 109 への復帰が幸せかも。</li>
</ul>
<h2 id="windows-w109-keyboard">Windows w/109 Keyboard</h2>
<ul>
<li>のどか 設定ファイル: SancC104on109.nodoka</li>
<li>109キーボードで104配列</li>
<li>SandC(Space and Control)</li>
</ul>
<table>
<thead>
<tr class="header">
<th>キー</th>
<th>割当</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>む　　</td>
<td>エンター (Lからの相対位置を各環境でそろえる)</td>
</tr>
<tr class="even">
<td>ろ　　</td>
<td>右シフト (?からの相対位置を各環境でそろえる)</td>
</tr>
<tr class="odd">
<td>半角/全角</td>
<td>バッククオート＆チルダ</td>
</tr>
<tr class="even">
<td>CTRL+J</td>
<td>Esc</td>
</tr>
<tr class="odd">
<td>変換</td>
<td>Esc</td>
</tr>
</tbody>
</table>
<h2 id="windows-bootcamp-on-macbook-us-keyboard">Windows Bootcamp on MacBook US Keyboard</h2>
<ul>
<li>のどか 設定ファイル: mbus-104.nodoka</li>
<li>SandC(Space and Control)</li>
</ul>
<table>
<thead>
<tr class="header">
<th>キー</th>
<th>割当</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CapsLock/Eisu</td>
<td>英数/CapsLock (シフト状態反転)</td>
</tr>
<tr class="even">
<td>CTRL+J</td>
<td>Esc</td>
</tr>
<tr class="odd">
<td>右Win</td>
<td>Esc</td>
</tr>
</tbody>
</table>
<h2 id="編集領域で-emacs-風キーバインド">編集領域で emacs 風キーバインド</h2>
<ul>
<li>のどか 設定ファイル: emacs-sub.nodoka</li>
<li>のどか ならでは機能。Karabinier-elements では調査・追求しない</li>
<li>Windows 標準の CTRL-CXVZ は置き換えない</li>
<li>Windows 標準の CTRL-AF は置き換えてしまった</li>
<li>CTRL-W は Chrome などでタブを閉じるのに使っているので置き換えない</li>
<li>CTRL-AENPFB/DHK/Y で移動・削除・ペースト</li>
<li>対象は、標準エディットコントロール/Notead/Thunderbird/Chrome</li>
</ul>
<h2 id="rdp-先での設定ファイル">RDP 先での設定ファイル</h2>
<ul>
<li>のどか 設定ファイル: RDP.nodoka</li>
<li>https://appletllc.com/web/nodoka-doc/CUSTOMIZE-ja.html<br />
キーボードLLフックに説明あり</li>
<li>キーの入れ替えはホスト側で実施</li>
<li>RDP先でも emacs 風キーバインド</li>
</ul>
<h2 id="google-ime">Google IME</h2>
<ul>
<li>Windows用設定ファイル: gime-keymap-esc.txt</li>
<li>6種類の状態で Esc で無変換状態にする。vi との親和性高い。</li>
<li>ツール、プロパティ、一般、キー設定の選択「カスタム」を選んで編集ボタンを押す</li>
<li>左下の編集ボタンを押してインポートを選ぶ</li>
</ul>
<h2 id="macos-on-macbook-us-keyboard">macOS on MacBook US Keyboard</h2>
<ul>
<li>未解決。Karabinier-elements を調査すべし。<br />
(めんどくさくて解決してないからほとんど macOS を起動していない)</li>
<li>SandC(Space and Control) をやりたい。SandS の情報あり</li>
<li>CTRL-J を Esc</li>
<li>CapsLock での IME制御をどうするか？を検討すべき</li>
<li>Mac 向け Google IME で、英数で漢字変換開始できるのか？</li>
</ul>
<h2 id="追加検討項目">追加検討項目</h2>
<ul>
<li>CTRL-M → Enter<br />
emacs-edit 対象では実施済み。Excel では、Enter 扱いされない</li>
<li>CTRL-H → BS<br />
emacs-edit 対象では実施済み。</li>
<li>CTRL-I → Tab<br />
CTRL-Tab というショートカットがあるのでやめたほうが良い。</li>
<li>CTRL-J → Esc を実施しないで同じ結果を得る方法を試す。<br />
vim/Google IME の設定変更で実施</li>
<li>無変換にEscを割り当てるのがよいのでは？<br />
109 しか使わないのであれば正解だと思う。 104 併用時では左側の modifier のリマップは避けるべき</li>
<li>Linux Desktop の場合はどうすればよいかの調査</li>
<li>のどか でしか実現できない配列に縛られて、Windows にも縛られている。<br />
いろいろな環境で満足できる配列はなにか？どこを妥協すればよいのか？</li>
</ul>
<h2 id="うんちく">うんちく</h2>
<ul>
<li>Bill Joy が vi を作ってたときの端末の<a href="https://upload.wikimedia.org/wikipedia/commons/a/a0/KB_Terminal_ADM3A.svg">キーボード配列</a><br />
なんと記号等はAscii配列ではない。漢ならば 109 そのままで vi を使うべき！<br />
<a href="https://catonmat.net/why-vim-uses-hjkl-as-arrow-keys">why-vim-uses-hjkl-keys</a><br />
</li>
<li>自分にはあんまり関係ないけど Symbolics のキーボードって凄いな。<br />
漢ならば 104/109 のコントロールキーを移動しちゃ駄目！<br />
<a href="https://catonmat.net/why-emacs-uses-meta-key">why-emacs-uses-meta-key</a></li>
</ul>
</body>
</html>
